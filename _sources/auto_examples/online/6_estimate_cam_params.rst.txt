
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/online/6_estimate_cam_params.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_online_6_estimate_cam_params.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_online_6_estimate_cam_params.py:


.. _cam_param_example:

Estimate camera parameters
==========================

This examples shows how to estimate the intrinsic parameters of a connected
Pupil Core world camera.

.. note::

    This example requires the dependencies for
    :ref:`streaming<streaming_dependencies>`.


.. GENERATED FROM PYTHON SOURCE LINES 16-22

.. code-block:: default

    import sys
    import logging

    import pupil_recording_interface as pri



.. GENERATED FROM PYTHON SOURCE LINES 23-27

Set Pupil Core generation
-------------------------

Set the generation of your Pupil Core device (1, 2 or 3)

.. GENERATED FROM PYTHON SOURCE LINES 27-29

.. code-block:: default

    pupil_gen = 2


.. GENERATED FROM PYTHON SOURCE LINES 30-32

Set folder for saving camera parameter
--------------------------------------

.. GENERATED FROM PYTHON SOURCE LINES 32-35

.. code-block:: default

    folder = "~/pupil_capture_settings"



.. GENERATED FROM PYTHON SOURCE LINES 36-38

Set up stream configurations
----------------------------

.. GENERATED FROM PYTHON SOURCE LINES 38-53

.. code-block:: default

    configs = [
        pri.VideoStream.Config(
            device_type="uvc",
            device_uid=f"Pupil Cam{pupil_gen} ID2",
            name="world",
            resolution=(1280, 720),
            fps=30,
            pipeline=[
                pri.CircleGridDetector.Config(),
                pri.CamParamEstimator.Config(folder=folder, streams=("world",)),
                pri.VideoDisplay.Config(),
            ],
        ),
    ]


.. GENERATED FROM PYTHON SOURCE LINES 54-56

Set up logger
-------------

.. GENERATED FROM PYTHON SOURCE LINES 56-60

.. code-block:: default

    logging.basicConfig(
        stream=sys.stdout, level=logging.INFO, format="%(message)s"
    )


.. GENERATED FROM PYTHON SOURCE LINES 61-66

Run manager
-----------
With one of the video windows in focus, press 'i' to acquire a pattern. You
need 10 in total, attempting to cover the entire FOV of the camera. Press 'q'
to quit.

.. GENERATED FROM PYTHON SOURCE LINES 66-76

.. code-block:: default

    with pri.StreamManager(configs) as manager:
        while not manager.stopped:
            if manager.keypresses._getvalue():
                key = manager.keypresses.popleft()
                if key.lower() == "i":
                    manager.send_notification({"acquire_pattern": True})
                elif key.lower() == "q":
                    break

    print("\nStopped")


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.000 seconds)


.. _sphx_glr_download_auto_examples_online_6_estimate_cam_params.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: 6_estimate_cam_params.py <6_estimate_cam_params.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: 6_estimate_cam_params.ipynb <6_estimate_cam_params.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
