<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pupil_recording_interface.StreamManager &mdash; pupil_recording_interface 0.5.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pupil_recording_interface.Pipeline" href="pupil_recording_interface.Pipeline.html" />
    <link rel="prev" title="pupil_recording_interface.MotionStream" href="pupil_recording_interface.MotionStream.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pupil_recording_interface
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">User guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reading.html">Reading data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../streaming.html">Streaming data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processing.html">Processing and recording data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis.html">Offline analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../additional.html">Additional features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../custom.html">Custom devices, streams and processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auto_examples/index.html">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Help &amp; reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../api.html#top-level-functions-and-classes">Top-level functions and classes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../api.html#i-o-functions">I/O functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#other-functions">Other functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#reader-classes">Reader classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#device-classes">Device classes</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../api.html#stream-classes">Stream classes</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pupil_recording_interface.VideoStream.html">pupil_recording_interface.VideoStream</a></li>
<li class="toctree-l4"><a class="reference internal" href="pupil_recording_interface.MotionStream.html">pupil_recording_interface.MotionStream</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">pupil_recording_interface.StreamManager</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api.html#process-classes">Process classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#class-member-details">Class member details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What’s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pupil_recording_interface</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api.html">API Reference</a></li>
      <li class="breadcrumb-item active">pupil_recording_interface.StreamManager</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_generated/pupil_recording_interface.StreamManager.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pupil-recording-interface-streammanager">
<h1>pupil_recording_interface.StreamManager<a class="headerlink" href="#pupil-recording-interface-streammanager" title="Permalink to this headline"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="pupil_recording_interface.StreamManager">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pupil_recording_interface.</span></span><span class="sig-name descname"><span class="pre">StreamManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'new_folder'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_queue_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pupil_recording_interface.StreamManager" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manager for multiple streams.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pupil_recording_interface.StreamManager.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'new_folder'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_queue_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pupil_recording_interface.StreamManager.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configs</strong> (<em>iterable of StreamConfig</em>) – An iterable of stream configurations.</p></li>
<li><p><strong>folder</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to the recording folder if any of the streams are being
recorded.</p></li>
<li><p><strong>policy</strong> (<em>str</em><em>, </em><em>default 'new_folder'</em>) – Policy for recording folder creation. If ‘new_folder’,
new sub-folders will be created with incremental numbering. If
‘here’, the data will be recorded to the specified folder but
will throw an error when existing files would be overwritten. If
‘overwrite’, the data will be recorded to the specified folder
and existing files will possibly be overwritten. If ‘read’,
the folder is only read from, for example when using a
‘video_file’ device.</p></li>
<li><p><strong>duration</strong> (<em>float</em><em>, </em><em>optional</em>) – If provided, the number of seconds after which the streams are
stopped.</p></li>
<li><p><strong>update_interval</strong> (<em>float</em><em>, </em><em>default 0.01</em>) – Time in seconds between status and notification updates. Higher
values might lead to to delays in communicating with the processes
and dropped messages while lower values might lead to increased
CPU load of the main process. Set to None for maximum update rate.
Will be dropped in a future version with an asynchronous
implementation of the update mechanism.</p></li>
<li><p><strong>status_timeout</strong> (<em>float</em><em>, </em><em>default 1.0</em>) – Maximum time in seconds to wait for status updates from a stream.
After this time, the status of the stream will be reset to the
default.</p></li>
<li><p><strong>max_queue_size</strong> (<em>int</em><em>, </em><em>default 20</em>) – Maximum size of process status and notification queues. Higher
values might lead to delays in communicating with the processes
while lower values might lead to dropped messages.</p></li>
<li><p><strong>app_info</strong> (<em>dict</em>) – When using pupil_recording_interface as the backend for a recording
app, provide a dict with the <code class="docutils literal notranslate"><span class="pre">&quot;name&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;version&quot;</span></code> of your
app such that the “recording_software_name” and
“recording_software_version” fields in <cite>info.player.json</cite> will
be set appropriately.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pupil_recording_interface.StreamManager.__init__" title="pupil_recording_interface.StreamManager.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>(configs[, folder, policy, …])</p></td>
<td><p>Constructor.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pupil_recording_interface.StreamManager.await_status" title="pupil_recording_interface.StreamManager.await_status"><code class="xref py py-obj docutils literal notranslate"><span class="pre">await_status</span></code></a>(stream, **kwargs)</p></td>
<td><p>Wait for a stream to report a certain status.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pupil_recording_interface.StreamManager.format_status" title="pupil_recording_interface.StreamManager.format_status"><code class="xref py py-obj docutils literal notranslate"><span class="pre">format_status</span></code></a>(key[, format, nan_format, …])</p></td>
<td><p>Format status dictionary to string.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pupil_recording_interface.StreamManager.run" title="pupil_recording_interface.StreamManager.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>()</p></td>
<td><p>Main loop (blocking).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pupil_recording_interface.StreamManager.save_info" title="pupil_recording_interface.StreamManager.save_info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_info</span></code></a>([final])</p></td>
<td><p>Save info.player.json file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pupil_recording_interface.StreamManager.send_notification" title="pupil_recording_interface.StreamManager.send_notification"><code class="xref py py-obj docutils literal notranslate"><span class="pre">send_notification</span></code></a>(notification[, streams])</p></td>
<td><p>Send a notification over the priority queues.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pupil_recording_interface.StreamManager.spin" title="pupil_recording_interface.StreamManager.spin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spin</span></code></a>([block])</p></td>
<td><p>Main worker loop of the manager.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pupil_recording_interface.StreamManager.spin_generator" title="pupil_recording_interface.StreamManager.spin_generator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spin_generator</span></code></a>()</p></td>
<td><p>Main worker loop of the manager, implemented as a generator.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pupil_recording_interface.StreamManager.start" title="pupil_recording_interface.StreamManager.start"><code class="xref py py-obj docutils literal notranslate"><span class="pre">start</span></code></a>()</p></td>
<td><p>Start recording.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pupil_recording_interface.StreamManager.stop" title="pupil_recording_interface.StreamManager.stop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stop</span></code></a>()</p></td>
<td><p>Stop streams.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">all_streams_running</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_duration</span></code></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="pupil_recording_interface.StreamManager.await_status">
<span class="sig-name descname"><span class="pre">await_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pupil_recording_interface.StreamManager.await_status" title="Permalink to this definition"></a></dt>
<dd><p>Wait for a stream to report a certain status.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pupil_recording_interface.StreamManager.format_status">
<span class="sig-name descname"><span class="pre">format_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'{:.2f}'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'no</span> <span class="pre">data'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sleep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pupil_recording_interface.StreamManager.format_status" title="Permalink to this definition"></a></dt>
<dd><p>Format status dictionary to string.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pupil_recording_interface.StreamManager.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pupil_recording_interface.StreamManager.run" title="Permalink to this definition"></a></dt>
<dd><p>Main loop (blocking).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pupil_recording_interface.StreamManager.save_info">
<span class="sig-name descname"><span class="pre">save_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">final</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pupil_recording_interface.StreamManager.save_info" title="Permalink to this definition"></a></dt>
<dd><p>Save info.player.json file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>final</strong> (<em>bool</em><em>, </em><em>default True</em>) – If False, assume that this method is called at the start of the
recording and save placeholders for values that can still change.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pupil_recording_interface.StreamManager.send_notification">
<span class="sig-name descname"><span class="pre">send_notification</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">notification</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streams</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pupil_recording_interface.StreamManager.send_notification" title="Permalink to this definition"></a></dt>
<dd><p>Send a notification over the priority queues.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pupil_recording_interface.StreamManager.spin">
<span class="sig-name descname"><span class="pre">spin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pupil_recording_interface.StreamManager.spin" title="Permalink to this definition"></a></dt>
<dd><p>Main worker loop of the manager.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>block</strong> (<em>bool</em><em>, </em><em>default True</em>) – If True, this method will block until the manager is stopped,
e.g. by a keyboard interrupt. Otherwise, the main loop is
dispatched to a separate thread which is returned by this
function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>thread</strong> – If <cite>block=True</cite>, the Thread instance that runs the loop.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>threading.Thread</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pupil_recording_interface.StreamManager.spin_generator">
<span class="sig-name descname"><span class="pre">spin_generator</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pupil_recording_interface.StreamManager.spin_generator" title="Permalink to this definition"></a></dt>
<dd><p>Main worker loop of the manager, implemented as a generator.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><strong>status</strong> (<em>dict</em>) – A mapping from stream names to their current status.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pupil_recording_interface.StreamManager.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pupil_recording_interface.StreamManager.start" title="Permalink to this definition"></a></dt>
<dd><p>Start recording.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pupil_recording_interface.StreamManager.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pupil_recording_interface.StreamManager.stop" title="Permalink to this definition"></a></dt>
<dd><p>Stop streams.</p>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pupil_recording_interface.MotionStream.html" class="btn btn-neutral float-left" title="pupil_recording_interface.MotionStream" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pupil_recording_interface.Pipeline.html" class="btn btn-neutral float-right" title="pupil_recording_interface.Pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Peter Hausamann / The Visual Experience Database.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>